{"version":3,"file":"merge.js","sourceRoot":"../src/","sources":["merge.ts"],"names":[],"mappings":"AAAA;;;;GAIG;AACH,MAAM,gBAAwB,MAAkB;IAAE,cAAkD;SAAlD,UAAkD,EAAlD,qBAAkD,EAAlD,IAAkD;QAAlD,6BAAkD;;IAClG,KAAkB,UAAI,EAAJ,aAAI,EAAJ,kBAAI,EAAJ,IAAI;QAAjB,IAAM,GAAG,aAAA;QACZ,MAAM,CAAC,MAAM,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC;KAC3B;IAED,OAAO,MAAW,CAAC;AACrB,CAAC;AAED;;;;;GAKG;AACH,kCAAkC;AAClC,gBAAmB,MAAS,EAAE,MAAS,EAAE,kBAA8B;IAA9B,mCAAA,EAAA,uBAA8B;IACrE,kBAAkB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAEhC,KAAK,IAAI,MAAI,IAAI,MAAM,EAAE;QACvB,IAAI,MAAM,CAAC,cAAc,CAAC,MAAI,CAAC,EAAE;YAC/B,IAAM,KAAK,GAAG,MAAM,CAAC,MAAI,CAAC,CAAC;YAE3B,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;gBAC7B,IAAM,mBAAmB,GAAG,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;gBAEnE,kCAAkC;gBACjC,MAAc,CAAC,MAAI,CAAC,GAAG,mBAAmB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAI,CAAC,IAAI,EAAE,EAAE,KAAK,EAAE,kBAAkB,CAAC,CAAC;aAC7G;iBAAM;gBACL,MAAM,CAAC,MAAI,CAAC,GAAG,KAAK,CAAC;aACtB;SACF;KACF;IAED,kBAAkB,CAAC,GAAG,EAAE,CAAC;IAEzB,OAAO,MAAM,CAAC;AAChB,CAAC","sourcesContent":["/**\n * Simple deep merge function. Takes all arguments and returns a deep copy of the objects merged\n * together in the order provided. If an object creates a circular reference, it will assign the\n * original reference.\n */\nexport function merge<T = {}>(target: Partial<T>, ...args: (Partial<T> | null | undefined | false)[]): T {\n  for (const arg of args) {\n    _merge(target || {}, arg);\n  }\n\n  return target as T;\n}\n\n/**\n * The _merge helper iterates through all props on source and assigns them to target.\n * When the value is an object, we will create a deep clone of the object. However if\n * there is a circular reference, the value will not be deep cloned and will persist\n * the reference.\n */\n// tslint:disable-next-line:no-any\nfunction _merge<T>(target: T, source: T, circularReferences: any[] = []): T {\n  circularReferences.push(source);\n\n  for (let name in source) {\n    if (source.hasOwnProperty(name)) {\n      const value = source[name];\n\n      if (typeof value === 'object') {\n        const isCircularReference = circularReferences.indexOf(value) > -1;\n\n        // tslint:disable-next-line:no-any\n        (target as any)[name] = isCircularReference ? value : _merge(target[name] || {}, value, circularReferences);\n      } else {\n        target[name] = value;\n      }\n    }\n  }\n\n  circularReferences.pop();\n\n  return target;\n}\n"]}